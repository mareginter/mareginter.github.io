<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academia Anti-Phishing Elite | Mareginter</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>ğŸ“ Academia Anti-Phishing Elite | Mareginter</h1>
        <div class="nav" id="navbar">
            <button onclick="goToDash()" id="btnDash">ğŸ“Š Dashboard</button>
            <button onclick="goToMods()" id="btnMods">ğŸ“š MÃ³dulos</button>
            <button onclick="goToSimulator()" id="btnSim">ğŸ® Simulador</button>
            <button onclick="goToBadges()" id="btnBadges">ğŸ… Conquistas</button>
            <button onclick="goToLibrary()" id="btnLib">ğŸ“– Biblioteca</button>
            <button onclick="goToCert()" id="btnCert" style="display:none">ğŸ“œ Certificado</button>
            <button onclick="goToAdmin()" id="btnAdmin" style="display:none">ğŸ‘‘ Admin</button>
            <button onclick="logout()" class="logout-btn">ğŸšª Sair</button>
        </div>
    </header>

    <main>
        <!-- LOGIN -->
        <div class="box" id="loginPage" style="max-width:500px;margin:4rem auto;text-align:center">
            <h2>ğŸ¯ Bem-vindo</h2>
            <p style="color:#64748b;margin:1rem 0">Sistema de FormaÃ§Ã£o em SeguranÃ§a Digital | Mareginter</p>
            
            <div style="margin-bottom:2rem">
                <button onclick="showLoginType('user')" id="btnLoginUser" style="margin:0.5rem">ğŸ‘¤ Colaborador</button>
                <button onclick="showLoginType('admin')" id="btnLoginAdmin" style="margin:0.5rem;background:#8b5cf6">ğŸ‘‘ Administrador</button>
            </div>

            <div id="userLogin">
                <input type="text" id="userName" placeholder="Nome completo" />
                <input type="email" id="userEmail" placeholder="Email profissional" />
                <input type="text" id="companyCode" placeholder="CÃ³digo da Empresa (opcional)" style="font-family:monospace" />
                <br>
                <button onclick="doLogin()">â–¶ Entrar</button>
            </div>

            <div id="adminLogin" style="display:none">
                <p style="font-size:0.9rem;color:#64748b;margin-bottom:1rem">
                    <strong>Login rÃ¡pido:</strong> Email + Senha
                </p>
                
                <input type="email" id="adminEmail" placeholder="Email Administrador *" style="border-color:#8b5cf6" />
                <input type="password" id="adminPass" placeholder="Senha *" style="border-color:#8b5cf6" />
                
                <div id="adminExtraFields" style="display:none;margin-top:1rem;padding-top:1rem;border-top:2px dashed #e2e8f0">
                    <p style="font-size:0.85rem;color:#ef4444;margin-bottom:0.5rem;font-weight:700">âš ï¸ Primeira vez? Preencha tambÃ©m:</p>
                    <input type="text" id="adminName" placeholder="Nome do Administrador *" />
                    <input type="text" id="companyName" placeholder="Nome da Empresa *" />
                </div>
                
                <br>
                <button onclick="doAdminLogin()" style="background:#8b5cf6">â–¶ Entrar como Admin</button>
            </div>
            
            <p id="loginMsg" style="margin-top:1rem;color:#64748b;font-size:0.9rem"></p>
        </div>

        <!-- DASHBOARD -->
        <div class="box hidden" id="dashboardPage">
            <h2>ğŸ“Š Painel de Controlo</h2>
            <div style="background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;padding:1.5rem;border-radius:8px;margin:1.5rem 0">
                <h3 style="margin-bottom:0.5rem">ğŸ‘‹ OlÃ¡, <span id="dashName"></span>!</h3>
                <p id="dashCompany" style="opacity:0.9"></p>
            </div>

            <div class="stat-grid">
                <div class="stat-card" style="background:linear-gradient(135deg,#3b82f6,#2563eb)">
                    <div class="stat-value" id="dashXP">0</div>
                    <div class="stat-label">XP Total</div>
                </div>
                <div class="stat-card" style="background:linear-gradient(135deg,#10b981,#059669)">
                    <div class="stat-value" id="dashMods">0</div>
                    <div class="stat-label">MÃ³dulos ConcluÃ­dos</div>
                </div>
                <div class="stat-card" style="background:linear-gradient(135deg,#f59e0b,#d97706)">
                    <div class="stat-value" id="dashBadges">0</div>
                    <div class="stat-label">Badges</div>
                </div>
                <div class="stat-card" style="background:linear-gradient(135deg,#8b5cf6,#7c3aed)">
                    <div class="stat-value" id="dashSims">0</div>
                    <div class="stat-label">SimulaÃ§Ãµes</div>
                </div>
            </div>

            <div style="margin-top:2rem">
                <h3 style="margin-bottom:1rem">ğŸ“ˆ Progresso Global</h3>
                <div class="progress-bar" style="height:20px">
                    <div class="progress-fill" id="dashProgress" style="width:0%"></div>
                </div>
                <p style="text-align:center;margin-top:0.5rem;color:#64748b">
                    <span id="dashProgressPct">0</span>% concluÃ­do
                </p>
            </div>

            <div style="margin-top:2rem;text-align:center">
                <button onclick="goToMods()">ğŸ“š Continuar FormaÃ§Ã£o</button>
                <button onclick="goToSimulator()">ğŸ® Testar Conhecimentos</button>
                <button onclick="goToLibrary()" style="background:#f59e0b">ğŸ“– Biblioteca</button>
            </div>
        </div>

        <!-- MÃ“DULOS -->
        <div class="box hidden" id="modulesPage">
            <h2>ğŸ“š MÃ³dulos de FormaÃ§Ã£o</h2>
            <p style="color:#64748b;margin-bottom:2rem">Complete todos os mÃ³dulos para desbloquear o certificado</p>
            <div id="modulesList"></div>
            <div id="premiumModulesSection" style="display:none">
                <h3 style="margin-top:2rem;border-top:2px solid #e2e8f0;padding-top:2rem">â­ MÃ³dulos Premium</h3>
                <p style="color:#64748b;margin-bottom:2rem">ConteÃºdo avanÃ§ado disponÃ­vel apÃ³s completar os 5 mÃ³dulos bÃ¡sicos com 4/5 ou mais</p>
                <div id="premiumModulesList"></div>
            </div>
        </div>

        <!-- QUIZ -->
        <div class="box hidden" id="quizPage">
            <div id="quizContent"></div>
        </div>

        <!-- SIMULADOR -->
        <div class="box hidden" id="simulatorPage">
            <h2>ğŸ® Simulador de Phishing</h2>
            <p style="color:#64748b;margin-bottom:1rem">Teste suas habilidades em cenÃ¡rios realistas</p>
            
            <div style="background:#f8fafc;padding:1rem;border-radius:8px;margin-bottom:2rem;display:flex;justify-content:space-around">
                <div style="text-align:center">
                    <div style="font-size:1.5rem;font-weight:900;color:#3b82f6" id="simScore">0</div>
                    <div style="font-size:0.9rem;color:#64748b">Score</div>
                </div>
                <div style="text-align:center">
                    <div style="font-size:1.5rem;font-weight:900;color:#10b981" id="simXP">0</div>
                    <div style="font-size:0.9rem;color:#64748b">XP Ganho</div>
                </div>
            </div>
            
            <div id="simulatorContent"></div>
        </div>

        <!-- CONQUISTAS -->
        <div class="box hidden" id="badgesPage">
            <h2>ğŸ… Conquistas e Badges</h2>
            <p style="color:#64748b;margin-bottom:2rem">Desbloqueie badges completando desafios</p>
            
            <div style="background:#f8fafc;padding:1.5rem;border-radius:8px;margin-bottom:2rem">
                <h3 style="margin-bottom:1rem">ğŸ¯ Progresso</h3>
                <div style="display:flex;justify-content:space-around;text-align:center">
                    <div>
                        <div style="font-size:2rem;font-weight:900;color:#3b82f6" id="badgesUnlocked">0</div>
                        <div style="font-size:0.9rem;color:#64748b">Desbloqueados</div>
                    </div>
                    <div>
                        <div style="font-size:2rem;font-weight:900;color:#10b981" id="badgesXP">0</div>
                        <div style="font-size:0.9rem;color:#64748b">XP Total</div>
                    </div>
                </div>
            </div>
            
            <div id="badgesList"></div>
        </div>

        <!-- BIBLIOTECA -->
        <div class="box hidden" id="libraryPage">
            <h2>ğŸ“– Biblioteca de Recursos</h2>
            <p style="color:#64748b;margin-bottom:2rem">Materiais de referÃªncia</p>
            <div id="libraryContent"></div>
        </div>

        <!-- CERTIFICADO -->
        <div class="box hidden" id="certificatePage">
            <h2>ğŸ“œ Certificado Profissional</h2>
            <p style="color:#64748b;margin-bottom:2rem">ParabÃ©ns pela conclusÃ£o da formaÃ§Ã£o!</p>
            
            <div style="text-align:center;margin-bottom:2rem">
                <div style="display:inline-block;text-align:left;background:#f8fafc;padding:1.5rem;border-radius:8px;margin-bottom:1rem">
                    <p><strong>ğŸ‘¤ Nome:</strong> <span id="certName">-</span></p>
                    <p><strong>ğŸ“§ Email:</strong> <span id="certEmail">-</span></p>
                    <p><strong>ğŸ¢ Empresa:</strong> <span id="certCompany">-</span></p>
                    <p><strong>ğŸ“… Data de ConclusÃ£o:</strong> <span id="certDate">-</span></p>
                    <p><strong>â­ XP Total:</strong> <span id="certXP">-</span></p>
                    <p><strong>ğŸ… Badges:</strong> <span id="certBadges">-</span></p>
                </div>
            </div>
            
            <div style="text-align:center">
                <canvas id="certCanvas" width="1000" height="850" style="border:8px double #1e293b;border-radius:12px;max-width:100%;height:auto"></canvas>
                <div style="margin-top:1.5rem">
                    <button onclick="downloadCert()">â¬‡ Descarregar Certificado</button>
                    <button onclick="window.print()">ğŸ–¨ Imprimir PÃ¡gina</button>
                    <button onclick="goToDash()" style="background:#64748b">â† Voltar ao Dashboard</button>
                </div>
            </div>
        </div>

        <!-- PAINEL ADMIN -->
        <div class="box hidden" id="adminPage">
            <div style="background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;padding:2rem;border-radius:12px;margin-bottom:2rem">
                <h2 style="margin-bottom:0.5rem">ğŸ‘‘ Painel de AdministraÃ§Ã£o</h2>
                <p id="adminWelcome" style="opacity:0.9"></p>
            </div>

            <div class="admin-metrics">
                <div class="metric-card">
                    <div class="metric-label">ğŸ‘¥ Total Colaboradores</div>
                    <div class="metric-value" id="metricTotalUsers">0</div>
                    <div class="metric-trend up" id="metricUsersTrend">+0 este mÃªs</div>
                </div>

                <div class="metric-card success">
                    <div class="metric-label">âœ… FormaÃ§Ã£o Completa</div>
                    <div class="metric-value" id="metricCompleted">0</div>
                    <div class="metric-trend" id="metricCompletedPct">0%</div>
                </div>

                <div class="metric-card warning">
                    <div class="metric-label">â³ Em Progresso</div>
                    <div class="metric-value" id="metricInProgress">0</div>
                    <div class="metric-trend" id="metricProgressPct">0%</div>
                </div>

                <div class="metric-card danger">
                    <div class="metric-label">âŒ NÃ£o Iniciado</div>
                    <div class="metric-value" id="metricNotStarted">0</div>
                    <div class="metric-trend" id="metricNotStartedPct">0%</div>
                </div>
            </div>

            <div class="admin-metrics">
                <div class="metric-card">
                    <div class="metric-label">ğŸ¯ Taxa de ConclusÃ£o</div>
                    <div class="metric-value" id="metricCompletionRate">0%</div>
                    <div class="progress-bar" style="margin-top:0.5rem">
                        <div class="progress-fill" id="metricCompletionBar" style="width:0%"></div>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-label">â­ XP MÃ©dio</div>
                    <div class="metric-value" id="metricAvgXP">0</div>
                    <div style="font-size:0.85rem;color:#64748b">pontos por colaborador</div>
                </div>

                <div class="metric-card">
                    <div class="metric-label">ğŸ… Badges Totais</div>
                    <div class="metric-value" id="metricTotalBadges">0</div>
                    <div style="font-size:0.85rem;color:#64748b">na empresa</div>
                </div>

                <div class="metric-card">
                    <div class="metric-label">ğŸ® SimulaÃ§Ãµes</div>
                    <div class="metric-value" id="metricTotalSims">0</div>
                    <div class="metric-trend" id="metricSimsAvg">mÃ©dia por user</div>
                </div>
            </div>

            <div class="admin-metrics">
                <div class="metric-card premium">
                    <div class="metric-label">â­ Colaboradores Premium</div>
                    <div class="metric-value" id="metricPremiumUsers">0</div>
                    <div class="metric-trend" id="metricPremiumPct">0%</div>
                </div>

                <div class="metric-card">
                    <div class="metric-label">ğŸ“… Dias MÃ©dia de ConclusÃ£o</div>
                    <div class="metric-value" id="metricAvgDays">0</div>
                    <div style="font-size:0.85rem;color:#64748b">para completar formaÃ§Ã£o</div>
                </div>

                <div class="metric-card">
                    <div class="metric-label">ğŸ“Š Taxa de AprovaÃ§Ã£o</div>
                    <div class="metric-value" id="metricPassRate">0%</div>
                    <div style="font-size:0.85rem;color:#64748b">mÃ©dia 4/5 ou mais</div>
                </div>

                <div class="metric-card">
                    <div class="metric-label">â±ï¸ Atividade Recente</div>
                    <div class="metric-value" id="metricActive7d">0</div>
                    <div style="font-size:0.85rem;color:#64748b">Ãºltimos 7 dias</div>
                </div>
            </div>

            <div class="box" style="background:#f8fafc">
                <h3 style="margin-bottom:1rem">ğŸ“Š Desempenho por MÃ³dulo</h3>
                <div id="adminModuleStats"></div>
            </div>

            <div class="invite-box">
                <h3 style="margin-bottom:1rem">ğŸ“§ Convite para Colaboradores</h3>
                <p style="opacity:0.95;margin-bottom:1rem">Partilhe este link:</p>
                <div class="invite-link" id="inviteLink"></div>
                <button onclick="copyInviteLink()" style="background:#10b981">ğŸ“‹ Copiar Link</button>
            </div>

            <div class="box">
                <h3 style="margin-bottom:1rem">ğŸ“‹ Cronologia da FormaÃ§Ã£o</h3>
                <div id="adminTimeline"></div>
            </div>

            <div class="box">
                <h3 style="margin-bottom:1rem">ğŸ† Ranking de Colaboradores</h3>
                <div id="adminRanking"></div>
            </div>

            <div class="box">
                <h3 style="margin-bottom:1rem">ğŸ‘¥ Lista de Colaboradores</h3>
                <input type="text" placeholder="ğŸ” Pesquisar..." style="width:100%;max-width:100%;margin-bottom:1rem" onkeyup="filterEmployees(this.value)" />
                <div id="adminEmployees"></div>
            </div>

            <div class="box">
                <h3 style="margin-bottom:1rem">ğŸ“ˆ EstatÃ­sticas Detalhadas</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Status</th>
                            <th>InÃ­cio</th>
                            <th>ConclusÃ£o</th>
                            <th>DuraÃ§Ã£o</th>
                            <th>MÃ©dia</th>
                            <th>Premium</th>
                        </tr>
                    </thead>
                    <tbody id="adminDetailedStats">
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- POPUP DE BOAS-VINDAS -->
    <div id="welcomeOverlay" class="welcome-overlay hidden"></div>
    <div id="welcomePopup" class="welcome-popup hidden">
        <h2>ğŸ‰ Bem-vindo Ã  Academia Anti-Phishing Elite!</h2>
        <p>Estamos muito felizes por teres iniciado esta jornada de formaÃ§Ã£o em seguranÃ§a digital.</p>
        
        <div class="welcome-feature">
            <div class="welcome-feature-icon">ğŸ“š</div>
            <div>
                <strong>MÃ³dulos de FormaÃ§Ã£o</strong>
                <p>5 mÃ³dulos progressivos para dominar a seguranÃ§a digital</p>
            </div>
        </div>
        
        <div class="welcome-feature">
            <div class="welcome-feature-icon">ğŸ®</div>
            <div>
                <strong>Simulador PrÃ¡tico</strong>
                <p>Testa teus conhecimentos com emails reais de phishing</p>
            </div>
        </div>
        
        <div class="welcome-feature">
            <div class="welcome-feature-icon">ğŸ“–</div>
            <div>
                <strong>Biblioteca de Recursos</strong>
                <p><strong>Importante:</strong> Se ainda nÃ£o te sentes preparado para os quizes ou simulaÃ§Ãµes, podes aceder Ã  biblioteca onde podes ler e aprender ao teu ritmo.</p>
            </div>
        </div>
        
        <p style="margin-top:2rem;color:#3b82f6;font-weight:600">
            ğŸ’¡ Dica: ComeÃ§a pela biblioteca para conhecer os conceitos antes de fazer os testes!
        </p>
        
        <button onclick="closeWelcomePopup()" style="margin-top:2rem;padding:1rem 2rem;font-size:1.1rem">
            â–¶ ComeÃ§ar FormaÃ§Ã£o
        </button>
    </div>

    <script src="script.js"></script>
</body>
</html>