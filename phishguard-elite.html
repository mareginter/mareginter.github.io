<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhishGuard Elite | FormaÃ§Ã£o Anti-Phishing</title>
    <link rel="stylesheet" href="phishguard-elite.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ›¡ï¸</text></svg>">
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">ğŸ›¡ï¸</div>
                <div class="logo-text">PhishGuard <span>Elite</span></div>
            </div>
            <nav class="nav hidden" id="navbar">
                <button class="nav-btn" onclick="goToDashboard()" id="btnDash">ğŸ“Š Dashboard</button>
                <button class="nav-btn" onclick="goToModules()" id="btnMods">ğŸ“š MÃ³dulos</button>
                <button class="nav-btn" onclick="goToSimulator()" id="btnSim">ğŸ® Simulador</button>
                <button class="nav-btn" onclick="goToBadges()" id="btnBadges">ğŸ… Badges</button>
                <button class="nav-btn" onclick="goToLibrary()" id="btnLib">ğŸ“– Biblioteca</button>
                <button class="nav-btn" onclick="goToCertificate()" id="btnCert" class="hidden">ğŸ“œ Certificado</button>
                <button class="nav-btn" onclick="goToAdmin()" id="btnAdmin" class="hidden">ğŸ‘‘ Admin</button>
                <button class="nav-btn logout-btn" onclick="logout()">ğŸšª Sair</button>
            </nav>
        </div>
    </header>

    <main>
        <!-- Login Page -->
        <div class="login-container card" id="loginPage">
            <div class="login-header">
                <h1>ğŸ›¡ï¸ Bem-vindo</h1>
                <p>FormaÃ§Ã£o profissional em seguranÃ§a digital</p>
            </div>
            
            <div class="login-tabs">
                <button class="login-tab active" onclick="showLoginType('user')" id="tabUser">
                    ğŸ‘¤ Colaborador
                </button>
                <button class="login-tab" onclick="showLoginType('admin')" id="tabAdmin">
                    ğŸ‘‘ Administrador
                </button>
            </div>

            <!-- User Login -->
            <div id="userLoginForm">
                <div class="form-group">
                    <label class="form-label">Nome completo</label>
                    <input type="text" class="form-input" id="userName" placeholder="JoÃ£o Silva" required />
                </div>
                
                <div class="form-group">
                    <label class="form-label">Email profissional</label>
                    <input type="email" class="form-input" id="userEmail" placeholder="joao@empresa.pt" required />
                </div>
                
                <div class="form-group">
                    <label class="form-label">Chave de ativaÃ§Ã£o <span class="form-hint">(opcional)</span></label>
                    <input type="text" class="form-input" id="activationKey" placeholder="XXXX-XXXX-XXXX-XXXX" style="font-family: var(--font-mono);" />
                </div>
                
                <div class="form-group">
                    <label class="form-label">CÃ³digo da empresa <span class="form-hint">(opcional)</span></label>
                    <input type="text" class="form-input" id="companyCode" placeholder="ABC123" style="font-family: var(--font-mono);" />
                </div>
                
                <button class="btn btn-primary btn-lg" onclick="doUserLogin()" style="width: 100%;">
                    Entrar na FormaÃ§Ã£o
                </button>
                
                <p class="text-center form-hint" style="margin-top: var(--space-4);">
                    ğŸ’¡ Sem chave? Contacte o administrador da sua empresa
                </p>
            </div>

            <!-- Admin Login -->
            <div id="adminLoginForm" class="hidden">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="adminEmail" placeholder="admin@empresa.pt" required />
                </div>
                
                <div class="form-group">
                    <label class="form-label">Senha</label>
                    <input type="password" class="form-input" id="adminPass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required />
                </div>
                
                <div id="adminExtraFields" class="hidden" style="margin-top: var(--space-4); padding-top: var(--space-4); border-top: 1px dashed var(--gray-300);">
                    <p class="alert alert-warning" style="margin-bottom: var(--space-4);">
                        âš ï¸ Primeiro acesso? Preencha os dados da empresa
                    </p>
                    
                    <div class="form-group">
                        <label class="form-label">Nome do administrador</label>
                        <input type="text" class="form-input" id="adminName" placeholder="Ana Santos" />
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Nome da empresa</label>
                        <input type="text" class="form-input" id="companyName" placeholder="Empresa, Lda" />
                    </div>
                </div>
                
                <button class="btn btn-primary btn-lg" onclick="doAdminLogin()" style="width: 100%;">
                    Entrar como Administrador
                </button>
            </div>
        </div>

        <!-- Dashboard -->
        <div class="card hidden" id="dashboardPage">
            <div class="flex justify-between items-center mb-6">
                <h2>ğŸ“Š Dashboard</h2>
                <span class="badge" style="background: var(--primary-100); color: var(--primary-700); padding: var(--space-1) var(--space-3); border-radius: var(--radius-full);">
                    CÃ³digo: <span id="dashCompany">---</span>
                </span>
            </div>
            
            <div class="card" style="background: linear-gradient(135deg, var(--primary-600), var(--primary-800)); color: white; margin-bottom: var(--space-6);">
                <h3 style="color: white; margin-bottom: var(--space-1);">ğŸ‘‹ OlÃ¡, <span id="dashName">Utilizador</span>!</h3>
                <p style="color: rgba(255,255,255,0.9); margin: 0;">Continue a sua jornada de aprendizagem</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">XP Total</div>
                    <div class="stat-value" id="dashXP">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">MÃ³dulos</div>
                    <div class="stat-value" id="dashMods">0/5</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Badges</div>
                    <div class="stat-value" id="dashBadges">0/8</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Sucesso</div>
                    <div class="stat-value" id="dashSuccess">0%</div>
                </div>
            </div>

            <div class="card" style="margin-top: var(--space-6);">
                <h3 class="card-title">ğŸ“ˆ Progresso Global</h3>
                <div class="progress mt-4">
                    <div class="progress-bar" id="dashProgress" style="width: 0%"></div>
                </div>
                <p class="text-center mt-2 form-hint">
                    <span id="dashProgressPct">0</span>% concluÃ­do
                </p>
            </div>

            <div class="flex justify-center gap-4 mt-6">
                <button class="btn btn-primary" onclick="goToModules()">ğŸ“š Continuar FormaÃ§Ã£o</button>
                <button class="btn btn-outline" onclick="goToSimulator()">ğŸ® Testar Conhecimentos</button>
            </div>
        </div>

        <!-- Modules Page -->
        <div class="card hidden" id="modulesPage">
            <h2 class="mb-4">ğŸ“š MÃ³dulos de FormaÃ§Ã£o</h2>
            <p class="form-hint mb-6">
                Complete todos os mÃ³dulos para desbloquear o certificado profissional
            </p>
            <div class="module-grid" id="modulesList"></div>
        </div>

        <!-- Dynamic Content -->
        <div id="dynamicContent"></div>
    </main>

    <!-- Welcome Modal -->
    <div id="welcomeOverlay" class="modal-overlay hidden">
        <div class="modal" id="welcomePopup">
            <div class="modal-header">
                <h3>ğŸ›¡ï¸ Bem-vindo ao PhishGuard Elite!</h3>
                <button class="modal-close" onclick="closeWelcomePopup()">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="text-center mb-6">
                    <div style="font-size: 4rem;">ğŸ›¡ï¸</div>
                    <p style="color: var(--gray-600);">A sua jornada de formaÃ§Ã£o comeÃ§a agora</p>
                </div>
                
                <div class="alert alert-info mb-4">
                    <strong>ğŸ¯ Como Funciona</strong>
                    <ul style="margin-top: var(--space-2); margin-left: var(--space-4);">
                        <li>10 mÃ³dulos progressivos</li>
                        <li>Quizzes interativos</li>
                        <li>Simulador realista</li>
                        <li>Sistema de conquistas</li>
                    </ul>
                </div>
                
                <div class="alert alert-warning mb-4">
                    <strong>ğŸ’¡ Dica Importante</strong>
                    <p class="mt-2">Visite primeiro a <strong>Biblioteca</strong> para estudar ao seu ritmo, sem pressÃ£o.</p>
                </div>
                
                <div class="alert alert-success">
                    <strong>ğŸ† Objetivo Final</strong>
                    <p class="mt-2">Complete todos os mÃ³dulos e obtenha o <strong>Certificado Profissional</strong></p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeWelcomePopup()">Explorar</button>
                <button class="btn btn-primary" onclick="goToModulesFromWelcome()">ComeÃ§ar FormaÃ§Ã£o</button>
            </div>
        </div>
    </div>

    <script src="phishguard-elite.js"></script>
</body>
</html>
